
<script language="javascript" type="text/javascript" src="/javascripts/calendar.js"></script>
<style type="text/css">
    input{
        width: auto;
        font-size: 28px;
    }
    button{
        width: auto;
        font-size: 28px;
    }
    table.halfpage{
        margin-left: auto;
        margin-right: auto;
        margin-top: 20px;
        margin-bottom: 20px;
    }
    .halfpage tr{
        height: 80px;

    }
    .halfpage caption{
        font-weight:bold;
    }
</style>


<div class="main_container">

  <table class="halfpage" cellspacing="10px" cellpadding="20px">
    <form method="post" action="/administration/save_site" >
      <caption style="font-family: arial;font-size:34px;">Edit Site Details</caption>
      <tr>
        <td id="site_lbl">Site Name</td>
        <td><input type="text" name="site_name" id='site' value='<%= params[:site] %>'></td>
      </tr>
      <tr>
        <td id='address_lbl'>IP Address</td>
        <td><input name="address" type="text" id='address' value='<%= params[:address] %>'></td>
      </tr>
      <tr>
        <td id='port_lbl'>Port</td>
        <td><input name="port" type="text" id='port' value='<%= params[:port] %>'></td>
      </tr>

    </form>
    <tr>
      <td colspan="2" style="text-align: center;">
        <button onclick="verify_form();" style="width: 300px;height:60px;border-radius: 30px;" class="main">Save</button>
      </td>
    </tr>
  </table>

</div>

<script type="text/javascript">
    <!--
    function verify_form()
    {

        var site = document.getElementById('site').value;
        var address = document.getElementById('address').value;
        var port = document.getElementById('port').value;
        var ipformat = /^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/;


        if (site.trim() == "")
        {
            highlight('site_lbl',true);
            jAlert("Please provide site name", "Incomplete Information");
        }
        else if (!address.match(ipformat))
        {
            jAlert("Expecting an IP address of format xxx.xxx.xxx.xxx", "Incomplete Information");
            highlight('author_lbl',true);
        }
        else if (!parseInt(port))
        {
            jAlert("Please provide application port", "Incomplete Information");
            highlight('port_lbl',true);
        }
        else
        {
            jQuery.ajax({
                url:  "/administration/save_site?site=" + site + "&address=" + address +"&port=" +port,
                type:"POST",
                success: function(msg){
                    jAlert(msg, "Site Creation Outcome")
                    window.location="/administration/list_sites"
                },
                error: function(){
                    jAlert("Could not create site", "Unsuccessful!");
                }

            });
        }


    }

    function clear()
    {
        document.getElementById('site').value = "";
        document.getElementById('address').value = "";
        document.getElementById('port').value = "";

    }
    //-->
</script>




